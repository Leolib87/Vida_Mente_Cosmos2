<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verdad y Propaganda en la Era Digital | O.C.V.M.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --secondary: #22d3ee;
            --primary-text: #e5e7eb;
            --primary-glow: #818cf8;
            --secondary-glow: #22d3ee;
            --font-main: 'Inter', sans-serif;
            --nav-height: 70px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }

        body {
            background-color: #000000;
            color: var(--primary-text);
            font-family: var(--font-main);
            line-height: 1.8;
            overflow-x: hidden;
        }
        
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            cursor: crosshair;
        }

        .glassmorphism {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.menu-open {
            overflow: hidden;
        }
        
        nav {
            position: fixed; top: 0; width: 100%; height: var(--nav-height);
            z-index: 1000;
            display: flex; justify-content: center; align-items: center;
            padding: 0 5%;
            pointer-events: auto;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .nav-logo a {
            font-size: 1.3em;
            font-weight: 700;
            color: #fff;
            text-decoration: none;
            text-shadow: 0 0 8px var(--primary-glow);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .nav-container { display: flex; justify-content: center; align-items: center; list-style: none; height: 100%; gap: 0.5rem;}
        nav .nav-container > li { position: relative; height: 100%; display: flex; align-items: center; }
        nav .nav-container > li > a {
            color: var(--primary-text); text-decoration: none; font-size: clamp(0.9em, 1.2vw, 1.05em); font-weight: 500;
            transition: color 0.3s ease, text-shadow 0.3s ease; padding: 0 1rem; display: flex; align-items: center; gap: 8px;
        }
        nav .nav-container > li > a:hover, nav .nav-container > li:hover > a { color: #FFFFFF; text-shadow: 0 0 12px var(--primary-glow); }
        
        .nav-icon { width: 20px; height: 20px; stroke-width: 1.5; }
        
        .hero {
            min-height: 80vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; position: relative;
            padding: 1rem;
            padding-top: var(--nav-height);
        }
        .hero-content { position: relative; z-index: 2; animation: fadeIn 2s ease-in; }
        .hero h1 {
            font-size: clamp(2.5rem, 8vw, 5.5rem); font-weight: 700; color: #fff;
            text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow), 0 0 40px rgba(129, 140, 248, 0.7);
            animation: pulse-glow 3s infinite alternate;
        }
        .hero p.subtitle { font-size: clamp(1.2rem, 3vw, 1.8rem); color: var(--secondary-glow); text-shadow: 0 0 8px var(--secondary-glow); margin-top: 0.5rem; }
        .hero p.description { font-size: clamp(1rem, 2.5vw, 1.2rem); max-width: 800px; margin: 1.5rem auto 0; text-shadow: 0 0 5px #000; }
        
        @keyframes pulse-glow {
            from { text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow); }
            to { text-shadow: 0 0 20px var(--primary-glow), 0 0 40px var(--primary-glow); }
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .main-container { 
            width: 100%;
            max-width: 1200px;
            margin: 0 auto; 
            padding: 1rem clamp(1rem, 5vw, 4rem) 1rem;
            pointer-events: none;
        }
        
        main, .footer, .section, .hero-content {
            pointer-events: auto;
        }

        main p, .footer p, main li, main blockquote {
            user-select: text;
            cursor: default;
        }

        .layout-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; margin-top: 2rem; }
        
        .section {
            padding: clamp(1.5rem, 5vw, 2.5rem);
            border-radius: 12px; margin-bottom: 2rem; position: relative;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }
        .section:hover { transform: translateY(-5px); box-shadow: 0 0 40px rgba(129, 140, 248, 0.2); }
        
        .section h2, .section .tab-nav, .section .tab-content {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .section.is-visible h2, .section.is-visible .tab-nav, .section.is-visible .tab-content-container {
            opacity: 1;
            transform: translateY(0);
        }
        
        h2 {
            font-size: clamp(1.5rem, 5vw, 2.2rem); color: var(--primary-text); text-shadow: 0 0 8px var(--secondary-glow);
            border-bottom: 1px solid var(--primary-glow); padding-bottom: 1rem; margin-bottom: 1.5rem;
        }
        h3 { font-size: clamp(1.4rem, 4vw, 1.9rem); color: var(--primary-glow); margin: 2.5rem 0 1.5rem 0; }
        h4 { font-size: clamp(1.2rem, 3vw, 1.5rem); color: var(--secondary-glow); margin-bottom: 1rem; margin-top: 2rem; }
        
        /* --- ESTILOS PARA TABS Y CONTENIDO --- */
        .color-personaje { color: #F59E0B; font-weight: 600; } /* Mustard Yellow */
        .color-concepto { color: var(--primary-glow); font-style: italic; font-weight: 500;}
        .color-idea { color: #a7f3d0; } /* Mint green */

        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid rgba(129, 140, 248, 0.3);
            margin-bottom: 2rem;
        }
        .tab-button {
            padding: 1rem 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--primary-text);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: -1px;
        }
        .tab-button:hover {
            color: #fff;
            background-color: rgba(129, 140, 248, 0.1);
        }
        .tab-button.active {
            color: var(--primary-glow);
            border-bottom-color: var(--primary-glow);
            text-shadow: 0 0 8px var(--primary-glow);
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeInContent 0.6s ease forwards;
        }
        @keyframes fadeInContent {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-content .card {
            background-color: rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .tab-content .quote-block {
            border-left: 3px solid var(--primary-glow);
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #c7d2fe;
        }

        .tab-content ul {
            list-style-position: inside;
            padding-left: 0.5rem;
        }
        .tab-content li {
            margin-bottom: 0.75rem;
        }
        
        .footer { text-align: center; padding: 2.5rem 1rem; color: var(--primary-glow); border-top: 1px solid var(--primary-text); margin-top: 2rem; }
        
        @media (min-width: 1025px) {
            .menu-toggle { display: none; }
            .nav-container { display: flex; }
        }

        @media (max-width: 1024px) {
            .nav-content { justify-content: space-between; }
            .nav-container {
                position: fixed;
                top: var(--nav-height);
                left: 0;
                width: 100%;
                height: calc(100vh - var(--nav-height));
                background: rgba(17, 24, 39, 0.95);
                backdrop-filter: blur(15px);
                flex-direction: column;
                justify-content: flex-start;
                align-items: center;
                transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                transform: translateY(-110%);
                overflow-y: auto;
                padding: 2rem;
            }
            body.menu-open .nav-container {
                transform: translateY(0);
            }

            nav .nav-container > li { width: 100%; height: auto; text-align: center; }
            nav .nav-container > li > a { padding: 1rem; width: 100%; font-size: 1.5em;}
            
            .menu-toggle {
                display: block; position: relative; z-index: 1001;
                width: 30px; height: 22px;
                background: none; border: none; cursor: pointer;
            }
            .icon-bar {
                display: block; width: 100%; height: 3px; background-color: var(--primary-text); 
                margin: 6px 0; transition: all 0.3s ease-in-out;
                border-radius: 2px;
            }

            body.menu-open .menu-toggle .icon-bar:nth-child(1) { transform: rotate(45deg) translate(7px, 7px); }
            body.menu-open .menu-toggle .icon-bar:nth-child(2) { opacity: 0; }
            body.menu-open .menu-toggle .icon-bar:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }
        }
    </style>
</head>
<body>
    <canvas id="bg-canvas" aria-hidden="true"></canvas>
    <nav class="glassmorphism">
        <div class="nav-content">
            <div class="nav-logo">
                <a href="index.html">
                    <img src="https://placehold.co/40x40/818cf8/000000?text=O" alt="Logo O.C.V.M." class="h-8 w-8 md:h-10 md:w-10 rounded-full">
                    <span>O.C.V.M.</span>
                </a>
            </div>
            <ul class="nav-container" id="nav-menu">
                <li><a href="index.html">
                    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>
                    Inicio</a></li>
                <li><a href="#contacto">
                    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" /></svg>
                    Contacto</a></li>
            </ul>
            <button class="menu-toggle" id="menu-toggle-btn" aria-label="Abrir o cerrar menú">
                <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
            </button>
        </div>
    </nav>

    <div class="main-container" id="inicio">
        <div class="hero">
            <div class="hero-content">
                <h1>Verdad y Propaganda en la Era Digital</h1>
                <p class="subtitle">Un diálogo entre Antonio Escotado y Marta Peirano</p>
                <p class="description">
                    Una profunda conversación sobre la naturaleza de la verdad, la manipulación en los medios tradicionales y digitales, y el destino del conocimiento en un mundo hiperconectado.
                </p>
            </div>
        </div>

        <div class="layout-grid">
            <main class="content">
                
                <section id="dialogo-contenido" class="glassmorphism" data-animate>
                    <h2>Análisis del Diálogo</h2>
                    
                    <div class="tab-nav">
                        <button class="tab-button active" onclick="changeTab(event, 'introduccion')">Introducción y Personajes</button>
                        <button class="tab-button" onclick="changeTab(event, 'verdad')">El Concepto de Verdad</button>
                        <button class="tab-button" onclick="changeTab(event, 'medios')">Medios: ¿Indoctrinación o Información?</button>
                        <button class="tab-button" onclick="changeTab(event, 'movil')">La Paradoja del Móvil</button>
                        <button class="tab-button" onclick="changeTab(event, 'propaganda')">Propaganda, Ideología y Conclusión</button>
                    </div>

                    <div class="tab-content-container">
                        <div id="introduccion" class="tab-content active">
                            <h3>Presentación de los Interlocutores</h3>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> Soy periodista y desde hace 20 años me dedico a investigar sobre tecnología, infraestructuras y, sobre todo, aspectos de la vigilancia de gobiernos, empresas y el internet de las cosas.</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Pues yo empecé como repelente niño vicente hacia los 15-16 años, y vete a saber por qué, me gustó más y más y seguí estudiando hasta el día de hoy. Soy el precipitado de un perro verde que se tira 13-15 horas diarias sintiendo mucha curiosidad por todo menos lo que sea yo. Si pones 70 años por 13 horas diarias de atender todo lo que no sea público, los likes que te ponen, por ejemplo, a tu foto... entonces es selectiva así como yo.</p>
                            <blockquote class="quote-block">
                                <span class="color-personaje">Marta Peirano:</span> Parece que la pregunta es: ¿quién decide la verdad?
                            </blockquote>
                        </div>

                        <div id="verdad" class="tab-content">
                            <h3>El Concepto de Verdad</h3>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> La verdad viene de <span class="color-concepto">Aletheia</span>, una palabra griega. 'A' es una partícula privativa, y 'Letheia' viene de 'Lethe', el olvido. La verdad es el <span class="color-idea">desvelamiento</span>, quitarle el velo. El velo principal es el olvido. La verdad es des-olvidar. Esto quiere decir que la verdad está siempre y en todas partes, lo que hay que quitarle es el velo de olvido que le ocurría.</p>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> Pero entonces los periodistas trabajan con otro tipo de verdad, porque el velo que tienen que quitar es otro, ¿no?</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Hay periodistas y hay medios de comunicación que en buena medida debemos llamar <span class="color-concepto">medios de indoctrinación</span>. O bien operan para propagar la parada (pagada o no), o bien por fidelidad a una ideología. Entonces la información se reduce a mínimos y la aproximación a máximos.</p>
                            <h4>La Realidad y el Infinito por Menor</h4>
                             <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> El desvelamiento implica que hay un objeto único que preexiste. Pero ahora mismo, el concepto que está en el aire es precisamente la existencia misma de ese objeto.</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> ¿En qué se distingue la realidad de cualquier otra cosa? En el <span class="color-idea">infinito por menor</span> que la rodea. Toda cosa real es interminable en el espacio, en el tiempo, en los detalles. Toda cosa de fantasía, una utopía, un sueño, ahí no hay infinitud. Pregúntale a una persona que sale de un sueño cómo son sus calcetines y no lo sabe, porque no es real. La realidad es lo inagotable.</p>
                        </div>
                        
                        <div id="medios" class="tab-content">
                            <h3>Medios: ¿Indoctrinación o Información?</h3>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> Si los periódicos son medios de indoctrinación, ¿cómo podemos describir a las plataformas digitales que se utilizan para manipular personas?</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Internet es lo más grande, el regalo más grande que la humanidad ha recibido. Clausura la distancia. La persona que use ese móvil no para mirar los likes de su foto, sino para mirar cualquier otra cosa, es un sabio muy superior. Depende de su paciencia, pero ahí está todo. Twitter y Facebook a mí me salvaron la vida, porque a mí me odiaban de siempre el PP y de siempre el PSOE. Gracias a las redes volví a existir. Mis obras llevaban 30 años sin recensiones en la prensa española. Ahora hay diez veces más comentarios.</p>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> ¿Entonces tú piensas que había más manipulación en los medios tradicionales de la que hay en las redes?</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Mil veces más, o un millón de veces más.</p>
                             <blockquote class="quote-block">
                               <span class="color-personaje">Marta Peirano:</span> Pero ¿cómo procesas entonces las campañas políticas que se hacen dentro de las redes sociales, que solamente las ve un grupo de personas y que están diseñadas para ese grupo de personas?
                            </blockquote>
                            <p><span class="color-personaje">Antonio Escotado:</span> La gente cree que interesa mucho a terceros. A mí me da igual, yo no tengo secretos. La derecha siempre dice: "si no estás haciendo nada malo, ¿para qué te vas a preocupar?". No tengo secretos, que miren lo que quieran.</p>
                        </div>

                        <div id="movil" class="tab-content">
                            <h3>La Paradoja del Móvil: Sabiduría o Distracción</h3>
                             <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Todos lleváis en el móvil el <span class="color-concepto">Nous Poietikos</span> de Aristóteles, es decir, la inteligencia infinita, absoluta y en acto que se manifiesta como sistema de la ciencia. Si tú, mirando el móvil 15 horas al día durante 20 años, tu tema fuera la geología, serías ahora la máxima experta mundial.</p>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> Si eso es verdad, ¿cómo es posible que después de 15 años de abuso de móvil por parte de las masas no tengamos expertos en geología?</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Es evidente, decía <span class="color-personaje">Spinoza</span>, que <span class="color-idea">lo virtuoso es tan sublime como raro</span>. La gente usa el móvil para todo menos para informarse de cosas distintas de su ombligo. Siguen aburriéndose, y cada vez más. Y abren el móvil y miran cuántos likes tiene mi foto.</p>
                            <blockquote class="quote-block">
                                <span class="color-personaje">Marta Peirano:</span> Se me ocurre que cuando estás mirando el móvil, a pesar de que tienes la opción de convertirte en un genio, pasan otras cosas. El móvil está diseñado para distraerte de manera continuada y deliberada, para que no apartes ni tus dedos ni tus ojos del dispositivo.
                            </blockquote>
                            <p><span class="color-personaje">Antonio Escotado:</span> El problema con el móvil es que ahora está dominado por empresas cuyo objetivo es que los usuarios pasen el mayor tiempo posible mirándolo. Y la manera de hacerlo no es contar las cosas importantes, sino entretenerles con estrategias idénticas a las de una máquina tragaperras.</p>
                        </div>
                        
                        <div id="propaganda" class="tab-content">
                            <h3>Propaganda, Ideología y la Búsqueda de la Verdad</h3>
                             <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> Pienso que es distinto a la propaganda en un periódico. Antes, tenías que hacer un solo mensaje para todo el país. Internet te permite hacer una propaganda distinta para grupos distintos, y pueden ser contradictorias.</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> Siempre ha habido diferentes realidades. Ahora se ha generalizado desde la <span class="color-concepto">post-verdad</span> y con <span class="color-personaje">Althusser</span>, <span class="color-personaje">Foucault</span>, <span class="color-personaje">Derrida</span>, la idea del relativismo. Como si al haber muchas perspectivas, se desdibujase la cosa. Todo lo contrario. Cuanto más puntos de vista tiene una cosa, más definida está.</p>
                            
                            <h4>¿Cómo Contar la Verdad?</h4>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> La condición para contar la verdad es llegar a ella. Para llegar a la verdad, hay que darse cuenta de que uno estaba equivocado. La verdad hay que buscarla, y hay que buscarla humildemente.</p>
                            <p class="mb-4"><span class="color-personaje">Marta Peirano:</span> ¿Pero qué pasa cuando todos y cada uno de los miembros de la población encuentran la verdad y resulta que es una distinta para cada uno?</p>
                            <p class="mb-4"><span class="color-personaje">Antonio Escotado:</span> No cambia nada. Tienes que darte cuenta de que nadie nunca tiene una idea adecuada de algo hasta detenerse en ello, olvidarse de sí mismo y dejar que eso que estábamos atendiendo se exponga a sí mismo.</p>

                            <h4>Conclusión: La Fluidez del Pensamiento</h4>
                            <blockquote class="quote-block">
                                <span class="color-personaje">Marta Peirano:</span> Entonces, podemos decir que para hacer un medio de comunicación tenemos que asumir que la verdad nunca es una idea fija.
                            </blockquote>
                            <p><span class="color-personaje">Antonio Escotado:</span> Lo primero que tienes que tener presente es que la verdad nunca va a ser una idea fija. Y que entonces, lo que define la inteligencia del pensamiento es la <span class="color-idea">fluidez</span>. La fijeza es lo propio de la ideología. Si cambias de ideología, ya te dicen "mamá, eres una veleta y te debemos matar".</p>
                        </div>
                    </div>
                </section>

            </main>
        </div>
        <footer class="footer" id="contacto">
            <h2>Contacto</h2>
            <p>Este espacio es una cartografía personal y una invitación al diálogo.</p>
            <p style="margin-top:1.5rem; font-size: 0.9em;">La vida es terriblemente bella cuando los jugadores juegan. | 2025</p>
        </footer>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof THREE !== 'undefined') {
                initThreeJS();
            } else {
                console.error("Three.js not loaded");
            }
            setupNavigation();
            setupScrollAnimations();
        });

        let scene, camera, renderer, points, lines;
        function initThreeJS() {
            try {
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
                camera.position.z = 50;
                renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("bg-canvas"), alpha: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                const pointCount = 200;
                const positions = new Float32Array(pointCount * 3);
                const pointGeo = new THREE.BufferGeometry();
                for (let i = 0; i < pointCount; i++) {
                    positions[i * 3] = (Math.random() - 0.5) * 400;
                    positions[i * 3 + 1] = (Math.random() - 0.5) * 400;
                    positions[i * 3 + 2] = (Math.random() - 0.5) * 400;
                }
                pointGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                const pointMaterial = new THREE.PointsMaterial({ color: 0x818cf8, size: 1.5, transparent: true, opacity: 0.8 });
                points = new THREE.Points(pointGeo, pointMaterial);
                scene.add(points);
                regenerateLines();
                window.addEventListener("resize", onWindowResize, false);
                document.addEventListener('mousemove', onMouseMove, false);
                renderer.domElement.addEventListener('click', onCanvasClick, false);
                animate();
            } catch (error) {
                console.error('Error initializing Three.js:', error);
            }
        }
        function onWindowResize() {
            if(camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        }
        let mouseX = 0, mouseY = 0;
        function onMouseMove(event) {
            mouseX = (event.clientX - window.innerWidth / 2) / 100;
            mouseY = (event.clientY - window.innerHeight / 2) / 100;
        }
        function animate() {
            requestAnimationFrame(animate);
            if(scene && camera && renderer && points && lines) {
                points.rotation.y += 0.0005;
                lines.rotation.y += 0.0005;
                camera.position.x += (mouseX - camera.position.x) * 0.05;
                camera.position.y += (-mouseY - camera.position.y) * 0.05;
                camera.lookAt(scene.position);
                renderer.render(scene, camera);
            }
        }
        function onCanvasClick(event) {
            const mouse = new THREE.Vector2();
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            const vector = new THREE.Vector3(mouse.x, mouse.y, 0.5);
            vector.unproject(camera);
            const dir = vector.sub(camera.position).normalize();
            const distance = -camera.position.z / dir.z;
            const pos = camera.position.clone().add(dir.multiplyScalar(distance));
            addPoint(pos);
        }
        function addPoint(position) {
            const oldPositions = points.geometry.attributes.position.array;
            const newPointCount = oldPositions.length / 3 + 1;
            const newPositions = new Float32Array(newPointCount * 3);
            newPositions.set(oldPositions);
            newPositions[oldPositions.length] = position.x;
            newPositions[oldPositions.length + 1] = position.y;
            newPositions[oldPositions.length + 2] = position.z;
            points.geometry.setAttribute('position', new THREE.BufferAttribute(newPositions, 3));
            points.geometry.attributes.position.needsUpdate = true;
            regenerateLines();
        }
        function regenerateLines() {
            if (lines) scene.remove(lines);
            const pointPositions = points.geometry.attributes.position.array;
            const pointCount = pointPositions.length / 3;
            const linePositions = [];
            for (let i = 0; i < pointCount; i++) {
                for (let j = i + 1; j < pointCount; j++) {
                    const dx = pointPositions[i * 3] - pointPositions[j * 3];
                    const dy = pointPositions[i * 3 + 1] - pointPositions[j * 3 + 1];
                    const dz = pointPositions[i * 3 + 2] - pointPositions[j * 3 + 2];
                    const dist = Math.sqrt(dx * dx + dy * dy + dz * dz);
                    if (dist < 50) {
                        linePositions.push(pointPositions[i * 3], pointPositions[i * 3 + 1], pointPositions[i * 3 + 2]);
                        linePositions.push(pointPositions[j * 3], pointPositions[j * 3 + 1], pointPositions[j * 3 + 2]);
                    }
                }
            }
            const lineGeo = new THREE.BufferGeometry();
            lineGeo.setAttribute('position', new THREE.Float32BufferAttribute(linePositions, 3));
            const lineMaterial = new THREE.LineBasicMaterial({ color: 0x22d3ee, opacity: 0.3, transparent: true });
            lines = new THREE.LineSegments(lineGeo, lineMaterial);
            scene.add(lines);
        }

        function setupNavigation() {
            const menuToggleBtn = document.getElementById('menu-toggle-btn');
            const navMenu = document.getElementById('nav-menu');
            menuToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                document.body.classList.toggle('menu-open');
            });
            navMenu.addEventListener('click', (e) => {
                if (e.target.tagName === 'A' && window.innerWidth <= 1024) {
                   document.body.classList.remove('menu-open');
                }
            });
        }

        function setupScrollAnimations() {
            const animatedSections = document.querySelectorAll('[data-animate]');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        const elementsToAnimate = entry.target.querySelectorAll('h2, .tab-nav, .tab-content-container');
                        elementsToAnimate.forEach((el, index) => {
                           el.style.transitionDelay = `${index * 150}ms`;
                        });
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            animatedSections.forEach(section => observer.observe(section));
        }

        function changeTab(event, tabID) {
            let tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            let tabButtons = document.getElementsByClassName('tab-button');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            document.getElementById(tabID).classList.add('active');
            event.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>
