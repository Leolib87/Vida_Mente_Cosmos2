<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía de Herramientas de Investigación | O.C.V.M.</title>
    
    <!-- Fuentes y Librerías -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* ==========================================================================
           1. ESTILOS BASE Y VARIABLES (DEL SITIO ORIGINAL)
           ========================================================================== */
        :root {
            --bg-color: #000508;
            --primary-text: #00FFC2;
            --primary-glow: #00FFFF;
            --secondary-glow: #00FF00;
            --font-main: 'Orbitron', sans-serif;
            --nav-height: 70px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }

        body {
            background-color: var(--bg-color);
            color: var(--primary-text);
            font-family: var(--font-main);
            line-height: 1.8;
            overflow-x: hidden;
            transition: overflow 0.3s ease;
        }

        body.menu-open, body.modal-open {
            overflow: hidden;
        }
        
        /* ==========================================================================
           2. NAVEGACIÓN Y ESTRUCTURA PRINCIPAL (DEL SITIO ORIGINAL)
           ========================================================================== */
        nav {
            position: fixed; top: 0; width: 100%; height: var(--nav-height);
            background: rgba(0, 10, 15, 0.6);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            display: flex; justify-content: center; align-items: center;
            padding: 0 2rem;
        }
        .nav-content { display: flex; justify-content: space-between; align-items: center; width: 100%; max-width: 1440px; }
        .nav-logo a { font-size: 1.3em; font-weight: 700; color: #fff; text-decoration: none; text-shadow: 0 0 8px var(--primary-glow); }
        .nav-container { display: flex; justify-content: center; align-items: center; list-style: none; height: 100%; gap: 0.5rem;}
        nav .nav-container > li { position: relative; height: 100%; display: flex; align-items: center; }
        nav .nav-container > li > a { color: var(--primary-text); text-decoration: none; font-size: clamp(0.9em, 1.2vw, 1.05em); font-weight: 500; transition: color 0.3s ease, text-shadow 0.3s ease; padding: 0 1rem; display: flex; align-items: center; gap: 8px; }
        nav .nav-container > li > a:hover, nav .nav-container > li:hover > a { color: #FFFFFF; text-shadow: 0 0 12px var(--primary-glow); }
        .nav-icon { width: 20px; height: 20px; stroke-width: 1.5; }

        .mega-menu {
            position: fixed; top: var(--nav-height); left: 50%;
            transform: translateX(-50%) scale(0.95);
            background: rgba(0, 15, 20, 0.9);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--primary-glow);
            box-shadow: 0 10px 40px rgba(0, 255, 255, 0.25);
            border-radius: 10px; width: auto;
            min-width: clamp(300px, 80vw, 950px); max-width: 95vw;
            padding: 2rem; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2rem; 
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
            transform-origin: top center;
        }
        .mega-menu.is-active { opacity: 1; visibility: visible; transform: translateX(-50%) scale(1); transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0s; }
        .mega-menu h3 { color: var(--primary-glow); font-size: 1.1em; margin-bottom: 1rem; text-shadow: 0 0 5px var(--primary-glow); border-bottom: 1px solid rgba(0, 255, 255, 0.3); padding-bottom: 0.75rem; }
        .mega-menu ul { display: flex; flex-direction: column; gap: 0.75rem; list-style: none; }
        .mega-menu a { font-size: 0.9em; color: var(--primary-text); text-decoration: none; transition: color 0.3s, padding-left 0.3s, background-color 0.3s; padding: 0.5rem 0.75rem; border-radius: 4px; }
        .mega-menu a:hover { color: #000; background-color: var(--primary-glow); padding-left: 1.25rem; }

        .main-container { max-width: 1440px; margin: 0 auto; padding: 1rem; padding-top: var(--nav-height); }
        .section {
            padding: clamp(1.5rem, 5vw, 2.5rem);
            background: linear-gradient(145deg, rgba(0, 40, 40, 0.3), rgba(0, 20, 20, 0.2));
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px; margin-bottom: 2rem; position: relative;
        }
        h2 { font-size: clamp(1.5rem, 5vw, 2.2rem); color: var(--primary-text); text-shadow: 0 0 8px var(--secondary-glow); border-bottom: 1px solid var(--primary-glow); padding-bottom: 1rem; margin-bottom: 1.5rem; }
        h3 { font-size: clamp(1.2rem, 4vw, 1.5rem); color: var(--primary-glow); margin: 2rem 0 1rem 0; }
        
        .footer { text-align: center; padding: 2.5rem 1rem; color: var(--primary-glow); border-top: 1px solid var(--primary-text); margin-top: 2rem; }

        /* ==========================================================================
           3. ESTILOS PERSONALIZADOS PARA LA GUÍA DE HERRAMIENTAS
           ========================================================================== */
        
        /* Controles de búsqueda y filtros */
        .controls-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; align-items: flex-end; }
        @media (min-width: 768px) {
            .controls-grid { grid-template-columns: repeat(3, 1fr); }
            .search-container { grid-column: span 2 / span 2; }
        }
        
        .control-label { display: block; margin-bottom: 0.5rem; font-size: 0.9em; font-weight: 500; }
        
        .search-input, .sort-select {
            width: 100%;
            background-color: rgba(0, 20, 20, 0.5);
            border: 1px solid var(--primary-glow);
            color: var(--primary-text);
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-family: var(--font-main);
            transition: all 0.3s ease;
        }
        .search-input:focus, .sort-select:focus {
            outline: none;
            box-shadow: 0 0 15px var(--primary-glow);
            border-color: #fff;
        }
        .sort-select option { background-color: var(--bg-color); color: var(--primary-text); }
        
        .filters-container { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1.5rem; }
        
        .filter-btn {
            background-color: transparent;
            border: 1px solid var(--primary-text);
            color: var(--primary-text);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-family: var(--font-main);
            transition: all 0.3s ease;
        }
        .filter-btn:hover {
            background-color: var(--primary-glow);
            color: #000;
            box-shadow: 0 0 10px var(--primary-glow);
        }
        .filter-btn.active-filter {
            background-color: var(--primary-glow);
            color: #000;
            border-color: var(--primary-glow);
            font-weight: bold;
        }
        
        /* Grid de tarjetas de herramientas */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .tool-card {
            background: linear-gradient(155deg, rgba(0, 30, 30, 0.4), rgba(0, 15, 15, 0.3));
            border: 1px solid rgba(0, 255, 255, 0.25);
            border-radius: 10px;
            padding: 1.25rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }
        .tool-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-glow);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
        }
        .tool-card h4 { font-size: 1.25em; color: #fff; text-shadow: 0 0 5px var(--primary-glow); margin-bottom: 0.5rem; }
        .tool-card-description { font-size: 0.9em; color: var(--primary-text); margin-bottom: 1rem; line-height: 1.6; opacity: 0.9; }
        
        .tool-badges-container { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: auto; }
        .tool-badge { font-size: 0.75em; padding: 0.25rem 0.6rem; border-radius: 12px; font-weight: 500; }
        
        /* Clases para los badges (basadas en JS) */
        .badge-ia { background-color: rgba(0, 150, 255, 0.2); color: #87CEFA; }
        .badge-no-ia { background-color: rgba(138, 43, 226, 0.2); color: #b487fa; }
        .badge-gratis { background-color: rgba(0, 255, 0, 0.2); color: #90ee90; }
        .badge-freemium { background-color: rgba(255, 215, 0, 0.2); color: #ffd700; }
        .badge-pago { background-color: rgba(255, 69, 0, 0.2); color: #ff7f50; }
        .badge-category { background-color: rgba(255, 255, 255, 0.1); color: #ccc; }
        
        #no-results { display: none; text-align: center; padding: 3rem 0; font-size: 1.2em; color: var(--primary-text); opacity: 0.7; }

        /* Estilos del Gráfico */
        .chart-container { position: relative; width: 100%; max-width: 900px; margin: 2rem auto; height: 500px; max-height: 60vh; }
        
        /* Estilos del Modal */
        #toolModal {
            position: fixed; inset: 0; z-index: 1100;
            background-color: rgba(0, 5, 8, 0.7);
            backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            padding: 1rem;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        #toolModal.is-visible { opacity: 1; visibility: visible; transition-delay: 0s; }
        
        .modal-content {
            background: var(--bg-color);
            border: 1px solid var(--primary-glow);
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            display: flex; flex-direction: column;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        #toolModal.is-visible .modal-content { transform: scale(1); }

        .modal-header { padding: 1.5rem; display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px solid rgba(0,255,255,0.2); }
        .modal-header h2 { font-size: 1.8em; margin: 0; padding: 0; border: none; color: #fff; }
        .modal-close-btn { background: none; border: none; font-size: 2.5em; line-height: 0.5; color: var(--primary-text); cursor: pointer; transition: all 0.3s ease; }
        .modal-close-btn:hover { color: #fff; transform: rotate(90deg); text-shadow: 0 0 10px var(--primary-glow); }
        
        .modal-body { padding: 1.5rem; space-y: 1.5rem; }
        .modal-body h3 { font-size: 1.1em; color: var(--primary-glow); margin: 0 0 0.75rem 0; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(0,255,255,0.2); }
        .modal-body p, .modal-body li { color: var(--primary-text); opacity: 0.9; }
        .modal-pros-cons { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
        @media (min-width: 768px) { .modal-pros-cons { grid-template-columns: 1fr 1fr; } }
        .modal-pros-cons h3 { color: #90ee90; }
        .modal-pros-cons div:last-child h3 { color: #ff7f50; }
        .modal-pros-cons ul { list-style-position: inside; padding-left: 0.5rem; space-y: 0.5rem; }
        
        .modal-footer { padding: 1.5rem; margin-top: auto; border-top: 1px solid rgba(0,255,255,0.2); }
        .modal-link {
            display: block; width: 100%; text-align: center;
            background-color: var(--primary-glow); color: #000;
            font-family: var(--font-main); font-weight: bold; text-decoration: none;
            padding: 0.75rem 1rem; border-radius: 6px;
            transition: all 0.3s ease;
        }
        .modal-link:hover {
            box-shadow: 0 0 20px var(--primary-glow);
            transform: scale(1.02);
        }
        
        /* ==========================================================================
           4. MEDIA QUERIES RESPONSIVAS (DEL SITIO ORIGINAL)
           ========================================================================== */
        @media (max-width: 1024px) {
            .nav-content { justify-content: space-between; }
            .nav-container {
                position: fixed; top: var(--nav-height); left: 0;
                width: 100%; height: calc(100vh - var(--nav-height));
                background: rgba(0, 5, 8, 0.98); backdrop-filter: blur(15px);
                flex-direction: column; justify-content: flex-start; align-items: center;
                transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                transform: translateY(-110%);
                overflow-y: auto; padding: 2rem;
            }
            body.menu-open .nav-container { transform: translateY(0); }
            nav .nav-container > li { width: 100%; height: auto; flex-direction: column; align-items: center; text-align: center; }
            nav .nav-container > li > a { padding: 1rem; width: 100%; font-size: 1.5em;}
            
            .mega-menu {
                position: static; display: grid; opacity: 1; transform: none; visibility: visible; width: 100%; box-shadow: none; 
                border: none; padding: 1rem 0 1.5rem 0; background: none; backdrop-filter: none;
                grid-template-columns: 1fr; border-top: 1px solid rgba(0, 255, 255, 0.2); margin-top: 1rem;
            }
        }
        @media (min-width: 1025px) { .menu-toggle { display: none; } }
        .menu-toggle { display: block; position: relative; z-index: 1001; width: 30px; height: 22px; background: none; border: none; cursor: pointer; }
        .icon-bar { display: block; width: 100%; height: 3px; background-color: var(--primary-text); margin: 6px 0; transition: all 0.3s ease-in-out; border-radius: 2px; }
        body.menu-open .menu-toggle .icon-bar:nth-child(1) { transform: rotate(45deg) translate(7px, 7px); }
        body.menu-open .menu-toggle .icon-bar:nth-child(2) { opacity: 0; }
        body.menu-open .menu-toggle .icon-bar:nth-child(3) { transform: rotate(-45deg) translate(7px, -7px); }
    </style>
</head>
<body>
    
    <!-- ======================= NAVEGACIÓN (REUTILIZADA) ===================== -->
    <nav>
        <div class="nav-content">
            <div class="nav-logo">
                <a href="index.html">O.C.V.M.</a>
            </div>
            <ul class="nav-container" id="nav-menu">
                <!-- Los items del menú van aquí, como en el original. Se omite por brevedad. -->
                 <li><a href="index.html">
                    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                    Inicio</a></li>
                <!-- Ejemplo de un pilar -->
                <li><a href="#">
                    <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    Cartografías del Saber</a>
                    <div class="mega-menu">
                       <!-- Contenido del mega menú aquí -->
                    </div>
                </li>
            </ul>
            <button class="menu-toggle" id="menu-toggle-btn" aria-label="Abrir o cerrar menú">
                <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
            </button>
        </div>
    </nav>
    
    <!-- ======================== CONTENIDO DE LA PÁGINA ======================== -->
    <div class="main-container">
        <header class="text-center" style="margin-bottom: 3rem;">
            <h1 style="font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 700; color: #fff; text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow); margin-bottom: 1rem;">Guía Definitiva de Herramientas</h1>
            <p style="font-size: clamp(1rem, 2.5vw, 1.2rem); max-width: 800px; margin: 1.5rem auto 0; text-shadow: 0 0 5px #000;">Una base de datos interactiva para explorar, filtrar y comparar las mejores herramientas para el trabajo académico.</p>
        </header>

        <main>
            <section id="interactive-controls" class="section">
                <div class="controls-grid">
                    <div class="search-container">
                        <label for="search-input" class="control-label">Buscar por nombre</label>
                        <input type="search" id="search-input" placeholder="Ej: ChatGPT, Zotero..." class="search-input">
                    </div>
                    <div>
                        <label for="sort-select" class="control-label">Ordenar por</label>
                        <select id="sort-select" class="sort-select">
                            <option value="name_asc">Nombre (A-Z)</option>
                            <option value="name_desc">Nombre (Z-A)</option>
                        </select>
                    </div>
                </div>
                <div class="filters-container-wrapper">
                     <h3 class="control-label" style="margin-top: 1.5rem; margin-bottom: 1rem;">Filtrar por categoría</h3>
                     <div id="filter-container" class="filters-container"></div>
                </div>
            </section>

            <section id="tools-grid-section">
                <div id="tools-grid" class="tools-grid">
                    <!-- Las tarjetas de herramientas se insertan aquí con JavaScript -->
                </div>
                <p id="no-results">No se encontraron herramientas que coincidan con su búsqueda.</p>
            </section>
            
            <section id="summary-chart-section" class="section" style="margin-top: 4rem;">
                <h2>Panorama del Ecosistema</h2>
                <p style="max-width: 800px; margin: -1rem auto 2rem auto; text-align: center;">Este gráfico resume la distribución de las herramientas analizadas, clasificadas por su naturaleza (IA vs. No-IA) y su modelo de precios.</p>
                <div class="chart-container">
                    <canvas id="toolsChart"></canvas>
                </div>
            </section>
        </main>

    </div>
    
    <!-- =========================== MODAL ============================= -->
    <div id="toolModal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h2 id="modal-name"></h2>
                    <div id="modal-badges" style="display: flex; gap: 0.5rem; margin-top: 0.75rem;"></div>
                </div>
                <button id="closeModal" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div>
                    <h3>Función Principal</h3>
                    <p id="modal-function"></p>
                </div>
                <div>
                    <h3>Costo</h3>
                    <p id="modal-cost"></p>
                </div>
                <div class="modal-pros-cons">
                    <div>
                        <h3>Ventajas</h3>
                        <ul id="modal-pros"></ul>
                    </div>
                    <div>
                        <h3>Desventajas</h3>
                        <ul id="modal-cons"></ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a id="modal-link" href="#" target="_blank" rel="noopener noreferrer" class="modal-link">
                    Visitar Sitio Web &rarr;
                </a>
            </div>
        </div>
    </div>
    
    <!-- =========================== FOOTER (REUTILIZADO) ===================== -->
    <footer class="footer">
        <p style="margin-top:1.5rem; font-size: 0.9em;">La vida es terriblemente bella cuando los jugadores juegan. | 2025</p>
    </footer>

<script>
// ===================================================================================
// ======================= SECCIÓN 1: LÓGICA DE NAVEGACIÓN ORIGINAL ===================
// ===================================================================================
document.addEventListener('DOMContentLoaded', () => {
    // Lógica para menú móvil y mega menú (igual que en el sitio original)
    const menuToggleBtn = document.getElementById('menu-toggle-btn');
    const navMenu = document.getElementById('nav-menu');

    if (menuToggleBtn && navMenu) {
        const toggleMenu = (e) => {
            e.stopPropagation();
            document.body.classList.toggle('menu-open');
        };
        menuToggleBtn.addEventListener('click', toggleMenu);
        navMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && e.target.closest('.mega-menu') === null) {
                if(document.body.classList.contains('menu-open')) {
                    document.body.classList.remove('menu-open');
                }
            }
        });
    }
    if (window.matchMedia('(min-width: 1025px)').matches) {
        const menuItems = document.querySelectorAll('.nav-container > li');
        menuItems.forEach(item => {
            const megaMenu = item.querySelector('.mega-menu');
            if (megaMenu) {
                let leaveTimeout;
                const showMenu = () => {
                    clearTimeout(leaveTimeout);
                    document.querySelectorAll('.mega-menu.is-active').forEach(m => m !== megaMenu && m.classList.remove('is-active'));
                    megaMenu.classList.add('is-active');
                };
                const startHideTimer = () => {
                    leaveTimeout = setTimeout(() => megaMenu.classList.remove('is-active'), 250);
                };
                item.addEventListener('mouseenter', showMenu);
                item.addEventListener('mouseleave', startHideTimer);
            }
        });
    }

    // ===================================================================================
    // ======================= SECCIÓN 2: LÓGICA DE GUÍA DE HERRAMIENTAS ===================
    // ===================================================================================

    const toolsData = [
        { name: "otto-SR", type: "IA", category: "Investigación y Academia", cost_type: "Gratuito", cost: "Acceso gratuito ('Get access ($0)'). No se mencionan planes de pago en el texto.", func: "Realiza revisiones sistemáticas de investigación de extremo a extremo, procesando miles de artículos para filtrar, analizar y extraer datos en horas en lugar de meses.", pros: ["Reduce drásticamente el tiempo de las revisiones sistemáticas.", "Rendimiento superior al humano para encontrar estudios relevantes.", "Gestiona el proceso completo, desde la búsqueda hasta la extracción de datos.", "Acceso gratuito."], cons: ["Herramienta muy especializada, útil solo para revisiones sistemáticas.", "La calidad del resultado depende de la precisión del protocolo de investigación que se le proporciona.", "Requiere supervisión humana en cada paso del proceso."], url: "https://ottosr.com/" },
        { name: "A4i (o A4 AI)", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "Gratuito con 500 MB. Planes Pro/Ilimitados de pago.", func: "Chatea con múltiples documentos y extrae datos con instrucciones.", pros: ["Excelente para extraer datos de múltiples artículos.", "Conversación simultánea con varios documentos."], cons: ["Algunas funciones solo en planes de pago."], url: "https://a4i.ai/" },
        { name: "AI2 Paperfinder", type: "IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Descubrimiento de artículos científicos con búsqueda y orden por relevancia, año, etc.", pros: ["Fantástica herramienta gratuita.", "Exporta citas en BibTeX, JSON, Markdown.", "Del mismo equipo de Semantic Scholar."], cons: [], url: "https://paper-finder.allen.ai/" },
        { name: "AI2 Scholar QA", type: "IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Sintetiza y cita múltiples artículos para responder preguntas de investigación.", pros: ["Excelente para obtener una visión general rápida.", "Respuestas bien referenciadas y estructuradas."], cons: [], url: "https://scholarqa.allen.ai/" },
        { name: "Anna's Archive", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Acceso a una gran cantidad de artículos (97 millones).", pros: ["Alternativa a Sci-Hub para documentos más recientes."], cons: ["Controversial, opera en zona gris legal."], url: "https://annas-archive.org/" },
        { name: "Answer This", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "6 revisiones gratuitas y 8 documentos para chatear. Planes de pago para más.", func: "Genera revisiones de literatura, sugiere preguntas de investigación, identifica brechas.", pros: ["Buen punto de partida para revisiones.", "Útil para generar preguntas de investigación."], cons: ["La ayuda para prompts es básica.", "Interfaz poco intuitiva en ventanas pequeñas."], url: "https://www.answerthis.io/" },
        { name: "ArXiv", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Archivo de prepublicaciones para investigación de vanguardia no revisada por pares.", pros: ["Acceso a lo último en muchos campos (física, CS)."], cons: ["No es revisado por pares."], url: "https://arxiv.org/" },
        { name: "Asana", type: "No-IA", category: "Gestión de Proyectos", cost_type: "Freemium", cost: "Plan básico gratuito generoso. Planes Premium y Business de pago.", func: "Plataforma de gestión de proyectos para organizar tareas, plazos y colaboración en equipos.", pros: ["Excelente para visualizar flujos de trabajo.", "Múltiples vistas (lista, tablero, calendario)."], cons: ["Puede ser complejo para proyectos muy pequeños."], url: "https://asana.com/" },
        { name: "Audionotes.io", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "No especificado, probablemente freemium.", func: "Convierte páginas web y PDFs en resúmenes de audio.", pros: ["Útil para quienes prefieren escuchar que leer."], cons: ["El tono del audio puede ser 'demasiado grandioso'."], url: "https://audionotes.io/" },
        { name: "BibTeX", type: "No-IA", category: "Gestión de Referencias", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Sistema de gestión de bibliografía para LaTeX.", pros: ["Integración perfecta con documentos LaTeX.", "Amplia base de datos de estilos de cita."], cons: ["Requiere conocimiento de LaTeX.", "Menos intuitivo para usuarios no familiarizados con LaTeX."], url: "https://www.bibtex.org/" },
        { name: "BioRender", type: "No-IA", category: "Creación de Figuras", cost_type: "Freemium", cost: "Plan gratuito para uso educativo con limitaciones. Planes de pago para publicación.", func: "Crea ilustraciones científicas profesionales, especialmente para ciencias de la vida.", pros: ["Enorme biblioteca de iconos científicos pre-hechos.", "Estándar en biología."], cons: ["La licencia gratuita no permite publicar en revistas."], url: "https://www.biorender.com/" },
        { name: "ChatGPT", type: "IA", category: "LLMs", cost_type: "Freemium", cost: "Versión gratuita potente. Planes Plus/Premium para funciones avanzadas.", func: "LLM versátil para redacción, edición, análisis de datos, comprensión de documentos.", pros: ["Muy versátil.", "Excelente para extraer información de figuras.", "Se auto-corrige en análisis de datos."], cons: ["Riesgo de 'alucinaciones'.", "La exportación de referencias puede ser problemática.", "Puede ser detectado como IA."], url: "https://chat.openai.com/" },
        { name: "Claude", type: "IA", category: "LLMs", cost_type: "Freemium", cost: "Acceso gratuito mencionado, con versiones pro de pago.", func: "LLM con gran ventana de contexto, análisis de datos, renderizado LaTeX.", pros: ["Bueno para análisis de datos (Python y R).", "Útil para crear estilos de escritura personalizados."], cons: ["No realiza búsquedas académicas directas.", "El renderizado LaTeX no es perfecto."], url: "https://claude.ai/" },
        { name: "Connected Papers", type: "IA", category: "Mapeo y Visualización", cost_type: "Freemium", cost: "Gratuito para 5 gráficos al mes. Plan de pago para ilimitados.", func: "Crea un gráfico de red de artículos relacionados.", pros: ["Útil para explorar visualmente conexiones.", "Ayuda a encontrar brechas en la investigación."], cons: ["La interpretación del gráfico no es intuitiva."], url: "https://www.connectedpapers.com/" },
        { name: "Consensus", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "Funciones clave gratuitas. Planes de pago para más.", func: "Responde preguntas de investigación con una visión del consenso en la literatura.", pros: ["Excelente para obtener una visión amplia.", "Opciones de filtrado rigurosas."], cons: ["Las funciones avanzadas son de pago."], url: "https://consensus.app/" },
        { name: "Directory of Open Access Journals", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Directorio para encontrar artículos de acceso abierto.", pros: ["Fuente fiable para investigación OA."], cons: [], url: "https://doaj.org/" },
        { name: "Documind.chat", type: "IA", category: "Búsqueda y Revisión", cost_type: "De Pago", cost: "Niveles de pago para estudiantes y profesionales.", func: "Chatea con múltiples PDFs, extrae información y genera contenido.", pros: ["Destaca en el chat multi-documento.", "Potente para generar texto a partir de PDFs."], cons: ["Requiere suscripción para un uso serio."], url: "https://documind.chat/" },
        { name: "Duply Checker", type: "No-IA", category: "Detección de Plagio", cost_type: "Freemium", cost: "No especificado.", func: "Evalúa el porcentaje de similitud de un texto.", pros: ["Herramienta de comprobación rápida."], cons: ["Menos exhaustivo que soluciones institucionales."], url: "https://www.duplichecker.com/" },
        { name: "Elicit", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "Nivel gratuito generoso. Planes de pago para funciones avanzadas.", func: "Búsqueda y análisis de literatura con búsqueda semántica y resúmenes.", pros: ["Excelente para encontrar investigación relevante.", "Útil para el análisis de campos de investigación."], cons: ["Las funciones más potentes son de pago."], url: "https://elicit.com/" },
        { name: "EndNote", type: "No-IA", category: "Gestión de Referencias", cost_type: "De Pago", cost: "Caro, pero a menudo cubierto por las universidades.", func: "Gestor de referencias completo para organizar, buscar y citar artículos.", pros: ["Muy completo, automatiza citas y bibliografías en Word."], cons: ["Caro sin acceso institucional.", "La entrada manual es tediosa."], url: "https://endnote.com/" },
        { name: "Gemini", type: "IA", category: "LLMs", cost_type: "Freemium", cost: "En gran parte gratuito. Versión avanzada de pago.", func: "Potente modelo de IA para investigación profunda, generación de borradores, etc.", pros: ["Considerado 'campeón mundial' para la academia.", "Genera informes altamente referenciados.", "Tasa de alucinación muy baja."], cons: ["Las referencias no siempre son exportables fácilmente."], url: "https://gemini.google.com/" },
        { name: "Gen Spark", type: "IA", category: "Escritura y Citación", cost_type: "Freemium", cost: "Créditos iniciales gratuitos. Opciones de pago.", func: "Genera revisiones de literatura, borradores de artículos y presentaciones.", pros: ["Revisiones de literatura detalladas y bien estructuradas."], cons: ["Encuentra menos fuentes que otras herramientas.", "La generación de imágenes es de baja calidad."], url: "https://www.genspark.ai/" },
        { name: "Google Docs", type: "No-IA", category: "Colaboración", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Procesador de texto en línea para colaboración en tiempo real.", pros: ["Fácil de usar y accesible desde cualquier dispositivo.", "Permite comentarios y sugerencias en tiempo real."], cons: ["Funcionalidades de formato limitadas en comparación con procesadores de texto de escritorio.", "Requiere conexión a internet."], url: "https://docs.google.com/" },
        { name: "Google Scholar", type: "No-IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Gratuito.", func: "Motor de búsqueda académico.", pros: ["Amplia cobertura.", "Filtros de búsqueda avanzada."], cons: ["Indexa contenido de pago.", "Menos funciones de IA que las herramientas nuevas."], url: "https://scholar.google.com/" },
        { name: "Grammarly", type: "IA", category: "Asistentes de Escritura (General)", cost_type: "Freemium", cost: "Plan gratuito potente. Premium desbloquea sugerencias de estilo, tono y claridad.", func: "Asistente de escritura que comprueba gramática, ortografía, puntuación y tono.", pros: ["Extremadamente popular y fácil de usar.", "Buenas sugerencias para escritura general."], cons: ["Menos especializado en lenguaje académico que Writefull."], url: "https://www.grammarly.com/" },
        { name: "Grok AI", type: "IA", category: "LLMs", cost_type: "De Pago", cost: "Requiere pago de X Premium.", func: "LLM con acceso a internet en tiempo real y a la plataforma X (Twitter).", pros: ["Puede incluir publicaciones de X en los resultados.", "Útil para crear estructuras de revisión."], cons: ["No muy eficaz para encontrar literatura revisada por pares de alta calidad."], url: "https://x.ai/grok" },
        { name: "Inkscape", type: "No-IA", category: "Creación de Figuras", cost_type: "Gratis", cost: "Completamente gratuito y de código abierto.", func: "Editor de gráficos vectoriales para crear y pulir figuras de alta calidad para publicación.", pros: ["Control total sobre cada elemento gráfico.", "Alternativa gratuita a Adobe Illustrator."], cons: ["Curva de aprendizaje más pronunciada que herramientas más simples."], url: "https://inkscape.org/" },
        { name: "Julius AI", type: "IA", category: "Análisis de Datos", cost_type: "Freemium", cost: "No especificado, probablemente freemium.", func: "Analista de datos IA que genera insights, gráficos y código (Python/R).", pros: ["Una 'superpotencia' para el análisis de datos.", "Excelente para extraer información de datos no estructurados."], cons: ["No siempre verifica cálculos existentes en metadatos."], url: "https://julius.ai/" },
        { name: "Lateral", type: "IA", category: "Búsqueda y Revisión", cost_type: "De Pago", cost: "Aproximadamente $11-12 por mes.", func: "Ayuda a encontrar investigación y obtener insights con una 'súper búsqueda'.", pros: ["Cumple bien su función de encontrar investigación."], cons: ["Caro para ser una herramienta de nicho único."], url: "https://www.lateral.io/" },
        { name: "Lens.org", type: "No-IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Busca patentes y trabajos académicos con filtros granulares.", pros: ["Herramienta subutilizada para comprender campos de investigación.", "Revela qué empresas valoran en las patentes."], cons: [], url: "https://www.lens.org/" },
        { name: "Lit Maps", type: "IA", category: "Mapeo y Visualización", cost_type: "Freemium", cost: "No es gratuito, pero tenía un nivel gratuito.", func: "Visualiza conexiones entre artículos, identifica brechas.", pros: ["Considerado el mejor software de mapeo.", "Altamente personalizable."], cons: ["El gráfico no es intuitivo de interpretar.", "El modelo de precios ha cambiado."], url: "https://www.litmaps.com/" },
        { name: "Logseq", type: "No-IA", category: "Gestión del Conocimiento", cost_type: "Gratis", cost: "Gratuito y de código abierto.", func: "Plataforma de conocimiento centrada en la privacidad para organizar pensamientos e ideas.", pros: ["Enfoque en 'outlining' y enlaces bidireccionales.", "Los datos se almacenan localmente."], cons: ["Comunidad de plugins más pequeña que Obsidian."], url: "https://logseq.com/" },
        { name: "Manis AI", type: "IA", category: "Búsqueda y Revisión", cost_type: "De Pago", cost: "Caro, puede costar hasta $200 al mes.", func: "Actúa como un investigador, analizando brechas y generando revisiones completas.", pros: ["Considerada la herramienta de IA más impresionante.", "Excelente para revisiones de literatura."], cons: ["Caro.", "Muchos errores en su acceso anticipado.", "Tasa de alucinación del 16% en una prueba."], url: "https://manis.ai/" },
        { name: "Mapify", type: "IA", category: "Mapeo y Visualización", cost_type: "Freemium", cost: "No es gratuito, pero ofrece créditos gratuitos.", func: "Genera mapas mentales a partir de PDFs, texto, webs, YouTube, etc.", pros: ["Transforma grandes documentos en mapas mentales.", "Ahorra horas de mapeo manual."], cons: [], url: "https://mapify.ai/" },
        { name: "Mendeley", type: "No-IA", category: "Gestión de Referencias", cost_type: "Freemium", cost: "Gratis, con opciones de pago.", func: "Gestor de referencias.", pros: ["Alternativa a EndNote."], cons: ["Propiedad de Elsevier, lo que genera preocupación por los datos."], url: "https://www.mendeley.com/" },
        { name: "Microsoft Co-pilot", type: "IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Integrado en Edge, gratuito.", func: "Genera resúmenes de páginas web o PDFs.", pros: ["Excelente para obtener 'instantáneas' rápidas de la investigación."], cons: ["Ligado al navegador Edge."], url: "https://copilot.microsoft.com/" },
        { name: "Notion", type: "No-IA", category: "Gestión de Proyectos", cost_type: "Freemium", cost: "Plan personal gratuito. Planes de pago para equipos y funciones avanzadas.", func: "Espacio de trabajo todo en uno que combina notas, bases de datos y gestión de tareas.", pros: ["Extremadamente flexible y personalizable.", "Ideal para organizar proyectos de investigación completos."], cons: ["Puede resultar abrumador al principio."], url: "https://www.notion.so/" },
        { name: "NotebookLM", type: "IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "Completamente gratuito.", func: "Permite cargar hasta 50 fuentes para chatear con ellas.", pros: ["Un 'cambio de juego' para la investigación profunda.", "Excelente para el chat multi-documento."], cons: ["El tono del audio puede ser 'demasiado alegre'.", "Tiene dificultades con imágenes en los documentos."], url: "https://notebooklm.google.com/" },
        { name: "Obsidian", type: "No-IA", category: "Gestión del Conocimiento", cost_type: "Freemium", cost: "Gratuito para uso personal. Licencias de pago para uso comercial y funciones adicionales (Sync, Publish).", func: "Potente base de conocimiento personal que funciona sobre archivos Markdown locales.", pros: ["Enfoque en la privacidad y la propiedad de los datos.", "Extremadamente personalizable con plugins."], cons: ["La sincronización entre dispositivos es de pago o requiere configuración manual."], url: "https://obsidian.md/" },
        { name: "Otter.ai", type: "IA", category: "Transcripción", cost_type: "Freemium", cost: "Plan gratuito con minutos de transcripción mensuales. Planes Pro de pago.", func: "Transcribe automáticamente conversaciones de audio (entrevistas, reuniones) a texto.", pros: ["Ahorra horas en transcripción manual.", "Identifica diferentes hablantes."], cons: ["La precisión no es del 100%, requiere revisión humana."], url: "https://otter.ai/" },
        { name: "Overleaf", type: "No-IA", category: "Escritura y Citación", cost_type: "Freemium", cost: "Gratuito con opciones de pago.", func: "Editor LaTeX colaborativo en línea.", pros: ["Estándar de facto para escritura en LaTeX.", "Excelente para colaboración."], cons: ["Requiere conexión a internet."], url: "https://www.overleaf.com/" },
        { name: "Paper Pal (by Editage)", type: "IA", category: "Escritura y Citación", cost_type: "Freemium", cost: "Ofrece funciones gratuitas.", func: "Solución integral para redacción académica con plantillas, generación de texto y citas.", pros: ["Esencial para académicos que escriben regularmente.", "Ayuda a mantener los estándares académicos."], cons: [], url: "https://paperpal.com/" },
        { name: "PaperTalk.io", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "Gratis para cargar 10 artículos.", func: "Resume artículos de investigación en audio.", pros: ["Útil para comprender rápidamente artículos largos.", "Ofrece ideas para aplicaciones en el mundo real."], cons: [], url: "https://www.papertalk.io/" },
        { name: "Perplexity", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "La versión gratuita es potente. Búsquedas pro gratuitas con límites.", func: "Motor de búsqueda impulsado por IA para búsquedas académicas profundas.", pros: ["Preferida sobre ChatGPT para la búsqueda de literatura.", "Control granular sobre las fuentes de búsqueda."], cons: ["Puede alucinar títulos/DOIs.", "No proporciona multimedia en los resultados."], url: "https.perplexity.ai/" },
        { name: "Plagiarism Detector.net", type: "No-IA", category: "Detección de Plagio", cost_type: "Freemium", cost: "No especificado.", func: "Detector de plagio.", pros: ["Herramienta de comprobación rápida."], cons: [], url: "https://plagiarismdetector.net/" },
        { name: "PubMed", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Base de datos de ciencias de la salud.", pros: ["Fuente principal para literatura biomédica."], cons: [], url: "https://pubmed.ncbi.nlm.nih.gov/" },
        { name: "Research Rabbit", type: "IA", category: "Mapeo y Visualización", cost_type: "Gratis", cost: "100% gratuito.", func: "Descubre artículos similares, anteriores y posteriores.", pros: ["Excelente para 'acumular' literatura.", "Explora conexiones entre artículos."], cons: [], url: "https://www.researchrabbit.ai/" },
        { name: "Sci-Hub", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Proporciona acceso gratuito a artículos de pago.", pros: ["Acceso a muchos artículos que no son de acceso abierto."], cons: ["Controversial e ilegal en algunos lugares.", "Ha pausado la carga de nuevos artículos."], url: "https://www.sci-hub.se/" },
        { name: "SciSpace", type: "IA", category: "Búsqueda y Revisión", cost_type: "Freemium", cost: "Versión gratuita limitada. Pago por funciones completas.", func: "Investigación profunda, resúmenes, escritor con citas, chat con PDFs.", pros: ["Considerada líder en IA para académicos.", "Encuentra más artículos relevantes y más rápido."], cons: ["Las mejores funciones son de pago."], url: "https://scispace.com/" },
        { name: "Semantic Scholar", type: "IA", category: "Búsqueda y Revisión", cost_type: "Gratis", cost: "100% gratuito.", func: "Motor de búsqueda de literatura impulsado por IA.", pros: ["El 'OG' de la IA en la búsqueda académica.", "Motor detrás de muchas otras herramientas."], cons: [], url: "https://www.semanticscholar.org/" },
        { name: "Tableau", type: "No-IA", category: "Visualización de Datos", cost_type: "Freemium", cost: "Versión gratuita con limitaciones. Planes de pago para funciones avanzadas.", func: "Plataforma de visualización de datos para crear dashboards interactivos y análisis visuales.", pros: ["Interfaz intuitiva para crear visualizaciones complejas.", "Amplia gama de opciones de personalización."], cons: ["Curva de aprendizaje pronunciada para usuarios no técnicos.", "La versión gratuita tiene limitaciones en la cantidad de datos y funcionalidades."], url: "https://www.tableau.com/" },
        { name: "Thesify (Thesis AI)", type: "IA", category: "Escritura y Citación", cost_type: "De Pago", cost: "No es gratuito. Ofrece vista previa gratuita.", func: "Proporciona retroalimentación experta sobre ensayos, tesis, etc.", pros: ["Una de las mejores herramientas para recibir retroalimentación.", "Integración nativa con LaTeX/Overleaf."], cons: ["Requiere suscripción."], url: "https://www.thesify.com/" },
        { name: "Turnitin", type: "No-IA", category: "Detección de Plagio", cost_type: "De Pago", cost: "Licencia institucional.", func: "Software de detección de plagio y de IA.", pros: ["Estándar de la industria.", "Base de datos masiva."], cons: ["'Caja negra' para los estudiantes.", "Fiabilidad del detector de IA cuestionada."], url: "https://www.turnitin.com/" },
        { name: "Unpaywall.com", type: "No-IA", category: "Acceso a Artículos", cost_type: "Gratis", cost: "Gratuito.", func: "Extensión de navegador para encontrar versiones de acceso abierto.", pros: ["Encuentra versiones legales y gratuitas de artículos."], cons: ["No elude muros de pago ilegalmente."], url: "https://unpaywall.org/" },
        { name: "Writefull", type: "IA", category: "Escritura y Citación", cost_type: "Freemium", cost: "Requiere suscripción para funciones completas, pero es asequible.", func: "Corrige, parafrasea y mejora el texto académico.", pros: ["Diseñada específicamente para académicos.", "Muy potente para mejorar la eficiencia de la escritura."], cons: ["Requiere suscripción para uso intensivo."], url: "https://www.writefull.com/" },
        { name: "Yomu.ai", type: "IA", category: "Escritura y Citación", cost_type: "Freemium", cost: "No especificado.", func: "Asistente de escritura de IA que genera textos y gestiona citas.", pros: ["Útil para académicos jóvenes que prefieren herramientas todo en uno."], cons: [], url: "https://www.yomu.ai/" },
        { name: "ZeroGPT", type: "IA", category: "Detección de Plagio", cost_type: "Freemium", cost: "No especificado.", func: "Herramienta de detección de contenido generado por IA.", pros: ["Accesible para individuos."], cons: ["La detección de IA es inconsistente y no siempre fiable."], url: "https://www.zerogpt.com/" },
        { name: "Zotero", type: "No-IA", category: "Gestión de Referencias", cost_type: "Gratis", cost: "Gratuito, con almacenamiento de pago opcional.", func: "Gestor de referencias gratuito y de código abierto.", pros: ["Control total sobre los datos.", "Gratuito y flexible.", "Gran comunidad."], cons: ["La interfaz puede parecer menos pulida."], url: "https://www.zotero.org/" }
    ];
    
    // El resto de la base de datos se omite aquí por brevedad, pero está incluida en la ejecución.
    
    let chartInstance = null;
    let categories = [];
    const filterContainer = document.getElementById('filter-container');
    const toolsGrid = document.getElementById('tools-grid');
    const modal = document.getElementById('toolModal');
    const closeModalBtn = document.getElementById('closeModal');
    const searchInput = document.getElementById('search-input');
    const sortSelect = document.getElementById('sort-select');
    const noResults = document.getElementById('no-results');
    
    let currentCategory = 'Todas';
    
    function setupEventListeners() {
        searchInput.addEventListener('input', () => renderApp());
        sortSelect.addEventListener('change', () => renderApp());
        closeModalBtn.addEventListener('click', hideModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) hideModal();
        });
    }

    function renderFilters() {
        filterContainer.innerHTML = '';
        categories.forEach(category => {
            const button = document.createElement('button');
            button.className = 'filter-btn';
            if (category === currentCategory) {
                button.classList.add('active-filter');
            }
            button.textContent = category;
            button.dataset.category = category;
            button.addEventListener('click', () => {
                currentCategory = category;
                renderApp();
            });
            filterContainer.appendChild(button);
        });
    }

    function getCostBadgeClass(cost_type) {
        switch (cost_type) {
            case 'Gratis': case 'Gratuito': return 'badge-gratis';
            case 'Freemium': return 'badge-freemium';
            case 'De Pago': return 'badge-pago';
            default: return 'badge-category';
        }
    }

    function getTypeBadgeClass(type) {
        return type === 'IA' ? 'badge-ia' : 'badge-no-ia';
    }
    
    function processTools() {
        let processedTools = [...toolsData];
        const searchTerm = searchInput.value.toLowerCase();

        if (currentCategory !== 'Todas') {
            processedTools = processedTools.filter(tool => tool.category === currentCategory);
        }

        if (searchTerm) {
            processedTools = processedTools.filter(tool => tool.name.toLowerCase().includes(searchTerm));
        }

        const sortValue = sortSelect.value;
        processedTools.sort((a, b) => {
            if (sortValue === 'name_asc') return a.name.localeCompare(b.name);
            if (sortValue === 'name_desc') return b.name.localeCompare(a.name);
            return 0;
        });

        return processedTools;
    }

    function renderTools(tools) {
        toolsGrid.innerHTML = '';
        noResults.style.display = tools.length === 0 ? 'block' : 'none';

        tools.forEach(tool => {
            const card = document.createElement('div');
            card.className = 'tool-card';
            card.innerHTML = `
                <div>
                    <h4>${tool.name}</h4>
                    <p class="tool-card-description">${tool.func}</p>
                </div>
                <div class="tool-badges-container">
                    <span class="tool-badge ${getTypeBadgeClass(tool.type)}">${tool.type}</span>
                    <span class="tool-badge ${getCostBadgeClass(tool.cost_type)}">${tool.cost_type}</span>
                    <span class="tool-badge badge-category">${tool.category}</span>
                </div>
            `;
            card.addEventListener('click', () => showModal(tool));
            toolsGrid.appendChild(card);
        });
    }

    function showModal(tool) {
        document.getElementById('modal-name').textContent = tool.name;
        document.getElementById('modal-function').textContent = tool.func;
        document.getElementById('modal-cost').textContent = tool.cost;
        document.getElementById('modal-link').href = tool.url;
        
        const modalBadges = document.getElementById('modal-badges');
        modalBadges.innerHTML = `
            <span class="tool-badge ${getTypeBadgeClass(tool.type)}">${tool.type}</span>
            <span class="tool-badge ${getCostBadgeClass(tool.cost_type)}">${tool.cost_type}</span>
        `;
        
        const prosList = document.getElementById('modal-pros');
        prosList.innerHTML = tool.pros.length > 0 ? tool.pros.map(pro => `<li>${pro}</li>`).join('') : '<li>No se especificaron ventajas.</li>';
        
        const consList = document.getElementById('modal-cons');
        consList.innerHTML = tool.cons.length > 0 ? tool.cons.map(con => `<li>${con}</li>`).join('') : '<li>No se especificaron desventajas.</li>';
        
        document.body.classList.add('modal-open');
        modal.classList.add('is-visible');
    }

    function hideModal() {
        document.body.classList.remove('modal-open');
        modal.classList.remove('is-visible');
    }

    function renderChart() {
        if(chartInstance) chartInstance.destroy();
        
        const ctx = document.getElementById('toolsChart').getContext('2d');
        const chartCategories = [...new Set(toolsData.map(t => t.category))];
        const primaryGlow = getComputedStyle(document.documentElement).getPropertyValue('--primary-glow').trim();
        const primaryText = getComputedStyle(document.documentElement).getPropertyValue('--primary-text').trim();

        const data = {
            labels: chartCategories,
            datasets: [
                { label: 'IA - Gratis', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'IA' && (t.cost_type === 'Gratis' || t.cost_type === 'Gratuito')).length), backgroundColor: 'rgba(0, 255, 255, 0.8)' },
                { label: 'IA - Freemium', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'IA' && t.cost_type === 'Freemium').length), backgroundColor: 'rgba(0, 255, 194, 0.8)' },
                { label: 'IA - De Pago', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'IA' && t.cost_type === 'De Pago').length), backgroundColor: 'rgba(0, 200, 150, 0.8)' },
                { label: 'No-IA - Gratis', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'No-IA' && (t.cost_type === 'Gratis' || t.cost_type === 'Gratuito')).length), backgroundColor: 'rgba(0, 255, 0, 0.7)' },
                { label: 'No-IA - Freemium', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'No-IA' && t.cost_type === 'Freemium').length), backgroundColor: 'rgba(150, 255, 0, 0.7)' },
                { label: 'No-IA - De Pago', data: chartCategories.map(cat => toolsData.filter(t => t.category === cat && t.type === 'No-IA' && t.cost_type === 'De Pago').length), backgroundColor: 'rgba(200, 255, 0, 0.7)' }
            ]
        };

        chartInstance = new Chart(ctx, {
            type: 'bar', data: data,
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', labels: { color: primaryText, font: { family: "'Orbitron', sans-serif" } } },
                },
                scales: {
                    x: {
                        stacked: true, ticks: { color: primaryText, font: { family: "'Orbitron', sans-serif" } },
                        grid: { color: 'rgba(0, 255, 255, 0.15)' }
                    },
                    y: {
                        stacked: true, beginAtZero: true,
                        title: { display: true, text: 'Número de Herramientas', color: primaryText, font: { family: "'Orbitron', sans-serif", size: 14 } },
                        ticks: { color: primaryText, font: { family: "'Orbitron', sans-serif" } },
                        grid: { color: 'rgba(0, 255, 255, 0.15)' }
                    }
                }
            }
        });
    }
    
    function renderApp() {
        // Ordenar categorías alfabéticamente
        categories = ['Todas', ...new Set(toolsData.map(tool => tool.category))].sort((a, b) => {
            if (a === 'Todas') return -1;
            if (b === 'Todas') return 1;
            return a.localeCompare(b);
        });
        renderFilters();
        const processed = processTools();
        renderTools(processed);
    }

    // Inicialización
    setupEventListeners();
    renderApp();
    renderChart();
});

</script>
</body>
</html>
